"use strict";(self.webpackChunkvisme_web=self.webpackChunkvisme_web||[]).push([[1838],{672781:(y,l,s)=>{s.d(l,{A:()=>a});var n=s(650405);const d=333,r=1;class i{videoId;id;el;endSeconds;startSeconds;thumbnail;additionalOptions;autoplay;looped;isPlayOnSetLoopedEnabled;muted;onEnd;onPause;onPlaying;onReady;onSeek;onMuteToggle;withControls;videoPlayer=null;isReady=!1;isFinished=!1;isFirstStart=!1;hasPlayedOnce=!1;_playingTimer=null;_willPlayOnReady=!1;constructor({el:e,id:t,videoId:o,muted:u=!1,looped:c=!1,isPlayOnSetLoopedEnabled:_=!0,autoplay:P=!1,withControls:p=!1,startSeconds:m=0,thumbnail:f=null,additionalOptions:v={},endSeconds:E=null,onEnd:g=()=>null,onReady:T=()=>null,onPlaying:S=()=>null,onSeek:A=()=>null,onPause:O=()=>null,onMuteToggle:M=()=>null}){this.el=e,this.id=t,this.videoId=o,this.muted=u,this.looped=c,this.isPlayOnSetLoopedEnabled=_,this.autoplay=P,this.withControls=p,this.startSeconds=m,this.endSeconds=E,this.onEnd=g,this.onReady=T,this.onPlaying=S,this.onPause=O,this.onMuteToggle=M,this.onSeek=A,this.thumbnail=f,this.additionalOptions=v,this.init().catch(this.handleError)}init(){return this.createPlayer()}async createPlayer(){await this._createPlayer(),this.isReady=!0,n.A.addToList(this),(this.autoplay||this._willPlayOnReady)&&this.play(),this.onReady(),this.isFirstStart=!0,this.hasPlayedOnce=!1}async handleStartTime(){await this.getCurrentTime()<this.startSeconds&&this.seekTo(this.startSeconds)}async handleEndTime(e=!1){const t=await this.getCurrentTime();!this.endSeconds||t<this.endSeconds||(this.isFinished=!0,this.looped||e?(this.seekTo(this.startSeconds),this.play()):(this.pause(),this.handleEnd()))}setStartSeconds(e=0){this.startSeconds!==e&&(this.startSeconds=e,this.handleStartTime().catch(this.handleError))}setEndSeconds(e=null){this.endSeconds!==e&&(this.endSeconds=e,this.handleEndTime().catch(this.handleError))}async _createPlayer(){}async getDuration(){return 0}play(){this.isReady?this._play():this._willPlayOnReady=!0}_play(){}pause(){}stop(){this.pause()}async isPlaying(){return this.isReady?this._isPlaying():!1}async _isPlaying(){return!1}async togglePlaying(){await this.isPlaying()?this.pause():this.play()}setLooped(e=!1){this.looped!==e&&(this.looped=e,this.looped&&this.isPlayOnSetLoopedEnabled&&this.play(),this._setLooped(e))}_setLooped(e){}mute(){}unMute(){}async isMuted(){return!1}_handleMute(e){this.onMuteToggle(e)}forceAbortBuffering(){}destroy(){n.A.removeFromList(this),this._playingTimer!==null&&clearInterval(this._playingTimer),this._destroy()}_destroy(){}seekTo(e){}async getCurrentTime(){return 0}_handleSeek(e){this.onSeek(e)}_handlePlaying(){this.onPlaying(),this.handleStartTime().catch(this.handleError),this.handleEndTime(!0).catch(this.handleError),this.checkIsFinished(),this.hasPlayedOnce||(this.hasPlayedOnce=!0),this._playingTimer||(this._playingTimer=setInterval(()=>{this.handleEndTime(!1).catch(this.handleError),this.checkIsFinished()},d))}_handlePause(){this.onPause(),this.isFirstStart&&(this.isFirstStart=!1),this._playingTimer!==null&&(clearInterval(this._playingTimer),this._playingTimer=null)}handleEnd(){this.isFinished=!0,this.looped?this.play():this.onEnd&&this.onEnd()}async checkIsFinished(){const e=await this.getDuration(),t=await this.getCurrentTime();e-t<r&&(this.isFinished=!0)}playbackRate(){return this._playbackRate()}_playbackRate(){return 1}handleError(e){console.error(e)}}const a=i},650405:(y,l,s)=>{s.d(l,{A:()=>r});var n=s(114317);const r=n.types.model({}).volatile(()=>({players:new Set})).actions(i=>({addToList(a){i.players.add(a)},removeFromList(a){i.players.delete(a)},pauseAllPlayersExcept(a){i.players.forEach(async h=>{h!==a&&h.pause()})}})).actions(i=>({pauseAllPlayers(){i.pauseAllPlayersExcept(null)}})).create()},182413:(y,l,s)=>{s.d(l,{default:()=>h});var n=s(812903),d=s(859435),r=s(672781);const i="https://player.vimeo.com/api/player.js";class a extends r.A{init(){return(0,d.k)(i).then(()=>(0,n.waitForVariable)("Vimeo")).then(()=>this.createPlayer()).catch(this.handleError)}_createPlayer(){return this.videoPlayer=new Vimeo.Player(this.el),this.videoPlayer.ready().then(()=>this._handleReady())}_handleReady(){return this.videoPlayer&&(this.videoPlayer?.on("ended",this.handleEnd.bind(this)),this.videoPlayer?.on("play",this._handlePlaying.bind(this)),this.videoPlayer?.on("pause",this._handlePause.bind(this)),this.videoPlayer?.on("seeked",this._handleSeekEvent.bind(this)),this.videoPlayer?.on("volumechange",this._handleVolumeChange.bind(this)),this.muted&&this.videoPlayer?.setVolume(0).catch(this.handleError),this.looped&&this._setLooped(!0)),Promise.resolve()}_handleSeekEvent(t){this._handleSeek(t.seconds)}_handleVolumeChange=t=>{this._handleMute(t.volume===0)};_setLooped(t){this.videoPlayer.setLoop(t).catch(this.handleError)}async getDuration(){return this.videoPlayer.getDuration()}_play(){this.videoPlayer.play()}pause(){this.videoPlayer.getPaused().then(t=>{t===!1&&this.videoPlayer.pause()})}async _isPlaying(){const[t,o]=await Promise.all([this.videoPlayer.getEnded(),this.videoPlayer.getPaused()]);return!t&&!o}async _handleMuteStatusAsync(t){const o=await this.isMuted();t!==o&&await this.videoPlayer.setVolume(t?0:1)}mute(){this._handleMuteStatusAsync(!0)}unMute(){this._handleMuteStatusAsync(!1)}async isMuted(){return await this.videoPlayer.getVolume()===0}seekTo(t){this.videoPlayer.setCurrentTime(t)}async getCurrentTime(){return this.videoPlayer.getCurrentTime()}_destroy(){this.videoPlayer&&(this.videoPlayer.off("ended"),this.videoPlayer.off("play"),this.videoPlayer.off("pause"),this.videoPlayer.off("seeked"),this.videoPlayer.off("volumechange"),this.videoPlayer.destroy())}}const h=a}}]);

//# sourceMappingURL=vimeoPlayer.f0546d2c3d97e5428485.chunk.js.map