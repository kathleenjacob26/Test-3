"use strict";(self.webpackChunkvisme_web=self.webpackChunkvisme_web||[]).push([[6215],{250445:(P,o,i)=>{i.d(o,{u:()=>l});const l=(h,d="https:")=>!h.startsWith("//")||window.location.protocol!=="file:"?h:`${d}${h}`},672781:(P,o,i)=>{i.d(o,{A:()=>s});var l=i(650405);const h=333,d=1;class a{videoId;id;el;endSeconds;startSeconds;thumbnail;additionalOptions;autoplay;looped;isPlayOnSetLoopedEnabled;muted;onEnd;onPause;onPlaying;onReady;onSeek;onMuteToggle;withControls;videoPlayer=null;isReady=!1;isFinished=!1;isFirstStart=!1;hasPlayedOnce=!1;_playingTimer=null;_willPlayOnReady=!1;constructor({el:e,id:r,videoId:t,muted:n=!1,looped:u=!1,isPlayOnSetLoopedEnabled:y=!0,autoplay:_=!1,withControls:p=!1,startSeconds:m=0,thumbnail:f=null,additionalOptions:E={},endSeconds:g=null,onEnd:v=()=>null,onReady:T=()=>null,onPlaying:S=()=>null,onSeek:w=()=>null,onPause:b=()=>null,onMuteToggle:O=()=>null}){this.el=e,this.id=r,this.videoId=t,this.muted=n,this.looped=u,this.isPlayOnSetLoopedEnabled=y,this.autoplay=_,this.withControls=p,this.startSeconds=m,this.endSeconds=g,this.onEnd=v,this.onReady=T,this.onPlaying=S,this.onPause=b,this.onMuteToggle=O,this.onSeek=w,this.thumbnail=f,this.additionalOptions=E,this.init().catch(this.handleError)}init(){return this.createPlayer()}async createPlayer(){await this._createPlayer(),this.isReady=!0,l.A.addToList(this),(this.autoplay||this._willPlayOnReady)&&this.play(),this.onReady(),this.isFirstStart=!0,this.hasPlayedOnce=!1}async handleStartTime(){await this.getCurrentTime()<this.startSeconds&&this.seekTo(this.startSeconds)}async handleEndTime(e=!1){const r=await this.getCurrentTime();!this.endSeconds||r<this.endSeconds||(this.isFinished=!0,this.looped||e?(this.seekTo(this.startSeconds),this.play()):(this.pause(),this.handleEnd()))}setStartSeconds(e=0){this.startSeconds!==e&&(this.startSeconds=e,this.handleStartTime().catch(this.handleError))}setEndSeconds(e=null){this.endSeconds!==e&&(this.endSeconds=e,this.handleEndTime().catch(this.handleError))}async _createPlayer(){}async getDuration(){return 0}play(){this.isReady?this._play():this._willPlayOnReady=!0}_play(){}pause(){}stop(){this.pause()}async isPlaying(){return this.isReady?this._isPlaying():!1}async _isPlaying(){return!1}async togglePlaying(){await this.isPlaying()?this.pause():this.play()}setLooped(e=!1){this.looped!==e&&(this.looped=e,this.looped&&this.isPlayOnSetLoopedEnabled&&this.play(),this._setLooped(e))}_setLooped(e){}mute(){}unMute(){}async isMuted(){return!1}_handleMute(e){this.onMuteToggle(e)}forceAbortBuffering(){}destroy(){l.A.removeFromList(this),this._playingTimer!==null&&clearInterval(this._playingTimer),this._destroy()}_destroy(){}seekTo(e){}async getCurrentTime(){return 0}_handleSeek(e){this.onSeek(e)}_handlePlaying(){this.onPlaying(),this.handleStartTime().catch(this.handleError),this.handleEndTime(!0).catch(this.handleError),this.checkIsFinished(),this.hasPlayedOnce||(this.hasPlayedOnce=!0),this._playingTimer||(this._playingTimer=setInterval(()=>{this.handleEndTime(!1).catch(this.handleError),this.checkIsFinished()},h))}_handlePause(){this.onPause(),this.isFirstStart&&(this.isFirstStart=!1),this._playingTimer!==null&&(clearInterval(this._playingTimer),this._playingTimer=null)}handleEnd(){this.isFinished=!0,this.looped?this.play():this.onEnd&&this.onEnd()}async checkIsFinished(){const e=await this.getDuration(),r=await this.getCurrentTime();e-r<d&&(this.isFinished=!0)}playbackRate(){return this._playbackRate()}_playbackRate(){return 1}handleError(e){console.error(e)}}const s=a},650405:(P,o,i)=>{i.d(o,{A:()=>d});var l=i(114317);const d=l.types.model({}).volatile(()=>({players:new Set})).actions(a=>({addToList(s){a.players.add(s)},removeFromList(s){a.players.delete(s)},pauseAllPlayersExcept(s){a.players.forEach(async c=>{c!==s&&c.pause()})}})).actions(a=>({pauseAllPlayers(){a.pauseAllPlayersExcept(null)}})).create()},322918:(P,o,i)=>{i.d(o,{default:()=>e,g:()=>s});var l=i(250445),h=i(859435),d=i(672781);const a=(0,l.u)("//fast.wistia.com/assets/external/E-v1.js"),s=(r,t)=>`${r}-${t}`;window._wq=window._wq||[];class c extends d.A{previousTime=0;init(){return(0,h.k)(a).then(()=>this.createPlayer()).catch(this.handleError)}_createPlayer(){return new Promise(t=>{const n=s(this.id,this.videoId),u=Wistia.api(n);if(u){this._handleReady(u,t);return}window._wq.push({id:n,onReady:y=>this._handleReady(y,t),options:{autoPlay:this.autoplay,muted:this.muted,playbar:this.withControls,volumeControl:this.withControls,playButton:this.withControls}})})}_handleReady(t,n){this.videoPlayer=t,this.muted&&this.videoPlayer.mute(),this.videoPlayer.bind("play",this._handlePlaying.bind(this)),this.videoPlayer.bind("pause",this._handlePause.bind(this)),this.videoPlayer.bind("end",this.handleEnd.bind(this)),this.videoPlayer.bind("timechange",this._handleTimeChange.bind(this)),this.videoPlayer.bind("volumechange",this._handleVolumeChange.bind(this)),this.el?.addEventListener("click",this._stopPropagation),n()}_handleVolumeChange=(t,n)=>{this._handleMute(n)};_handleTimeChange=t=>{const u=t-this.previousTime,y=Math.abs(u);let _=!1;y>0&&(u<0&&y>.1||y>.45*this.playbackRate())&&(_=!0),this.previousTime=t,_&&this._handleSeek(t)};async getDuration(){return this.videoPlayer.duration()}_play(){this.videoPlayer.play()}pause(){this.videoPlayer.pause()}async _isPlaying(){return this.videoPlayer.state()==="playing"}mute(){this.videoPlayer.mute()}unMute(){this.videoPlayer.unmute(),this.videoPlayer.volume(100)}async isMuted(){return this.videoPlayer.isMuted()}seekTo(t){this.videoPlayer.time(t)}async getCurrentTime(){return this.videoPlayer.time()}_destroy(){this.videoPlayer&&this.el&&(this.el.removeEventListener("click",this._stopPropagation),this.videoPlayer.remove())}_stopPropagation(t){t.stopPropagation()}}const e=c}}]);

//# sourceMappingURL=wistiaPlayer.87eb3e59079d059f9609.chunk.js.map